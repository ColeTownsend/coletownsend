/*!
 * Retina.js v1.3.0
 *
 * Copyright 2014 Imulus, LLC
 * Released under the MIT license
 *
 * Retina.js is an open source script that makes it easy to serve
 * high-resolution images to devices with retina displays.
 */
!function(){function i(){}function h(b){return k.retinaImageSuffix+b}function n(b,o){if(this.path=b||"","undefined"!=typeof o&&null!==o){this.at_2x_path=o,this.perform_check=!1}else{if(void 0!==document.createElement){var g=document.createElement("a");g.href=this.path,g.pathname=g.pathname.replace(j,h),this.at_2x_path=g.href}else{var f=this.path.split("?");f[0]=f[0].replace(j,h),this.at_2x_path=f.join("?")}this.perform_check=!0}}function m(d){this.el=d,this.path=new n(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var c=this;this.path.check_2x_variant(function(b){b&&c.swap()})}var l="undefined"==typeof exports?window:exports,k={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};l.Retina=i,i.configure=function(d){null===d&&(d={});for(var c in d){d.hasOwnProperty(c)&&(k[c]=d[c])}},i.init=function(d){null===d&&(d=l);var c=d.onload||function(){};d.onload=function(){var b,p,o=document.getElementsByTagName("img"),g=[];for(b=0;b<o.length;b+=1){p=o[b],p.getAttributeNode("data-no-retina")||g.push(new m(p))}c()}},i.isRetina=function(){var b="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return l.devicePixelRatio>1?!0:l.matchMedia&&l.matchMedia(b).matches?!0:!1};var j=/\.\w+$/;l.RetinaImagePath=n,n.confirmed_paths=[],n.prototype.is_external=function(){return !(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},n.prototype.check_2x_variant=function(e){var c,f=this;return this.is_external()?e(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in n.confirmed_paths?e(!0):(c=new XMLHttpRequest,c.open("HEAD",this.at_2x_path),c.onreadystatechange=function(){if(4!==c.readyState){return e(!1)}if(c.status>=200&&c.status<=399){if(k.check_mime_type){var a=c.getResponseHeader("Content-Type");if(null===a||!a.match(/^image/i)){return e(!1)}}return n.confirmed_paths.push(f.at_2x_path),e(!0)}return e(!1)},c.send(),void 0):e(!0)},l.RetinaImage=m,m.prototype.swap=function(e){function d(){f.el.complete?(k.force_original_dimensions&&(f.el.setAttribute("width",f.el.offsetWidth),f.el.setAttribute("height",f.el.offsetHeight)),f.el.setAttribute("src",e)):setTimeout(d,5)}"undefined"==typeof e&&(e=this.path.at_2x_path);var f=this;d()},i.isRetina()&&i.init(l)}();